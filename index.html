<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>페트라수학</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./media.css" />
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21"></script>
    <script src="//t1.daumcdn.net/tistory_admin/lib/jquery/jquery-1.12.4.min.js"></script>
  </head>
  <body id="[##_body_id_##]">
    <nav id="navbar">
      <ul>
        <li id="navItemIntro" class="nav-item">소개</li>
        <li id="navItemEnrol" class="nav-item">등록안내</li>
        <li id="navItemLocat" class="nav-item">오시는길</li>
        <li id="navItemNotif" class="nav-item">소식</li>
      </ul>
    </nav>
    <div id="wrap">
      <div id="home" class="section-item scroll-snap">
        <img class="logo" src="./img/logo-white.png" alt="페트라수학" />
        <span>수학을 즐겁고, 재밌게!</span>
        <div class="down-ico">
          <div style="margin-bottom: 5px; font-size: 18px">
            교습소를 소개합니다!
          </div>
          <span class="material-symbols-outlined">
            keyboard_double_arrow_down
          </span>
        </div>
      </div>
      <div id="intro" class="section-item scroll-snap">
        <div class="wrapper">
          <div class="mr-3">
            <h2>소개</h2>
            <div class="desc desc-box">
              페트라수학은 1:1 개별관리로, 개인 맞춤형 지도를 통해 학생들의 학습
              수준과 요구에 따라 세심한 지도가 가능합니다. 이를 통해 학생들은
              자신의 능력을 최대한 발휘하며 수학에 대한 자신감을 쌓을 수
              있습니다.
            </div>
          </div>
          <div>
            <img
              id="introDescImg"
              src="./img/study_room.jpg"
              alt="study room image"
            />
          </div>
        </div>
        <div class="down-ico">
          <span class="material-symbols-outlined">
            keyboard_double_arrow_down
          </span>
        </div>
      </div>
      <div id="enroll" class="section-item scroll-snap">
        <h2>등록안내</h2>
        <ul class="desc">
          <li>대상학년: 초등 4학년 ~ 고등 1학년</li>
          <li>모집시기: 상시 모집 중</li>
          <li>모집방법: 전화 문의 (010-1234-5678)</li>
        </ul>
        <div class="down-ico">
          <span class="material-symbols-outlined">
            keyboard_double_arrow_down
          </span>
        </div>
      </div>
      <div id="location" class="section-item scroll-snap">
        <h2>오시는길</h2>
        <div class="desc floating-rectangle">
          <p>영국 런던 W1U 6RP 베이커가 221번지</p>
        </div>
        <div>
          <a href="https://naver.me/5kqG8oSL" target="_blank">여기</a>를
          누르시면 네이버 지도로 연결됩니다.
        </div>
        <div class="down-ico">
          <span class="material-symbols-outlined">
            keyboard_double_arrow_down
          </span>
        </div>
      </div>
      <div id="notify" class="section-item">
        <h2>소식</h2>
        <div class="container">
          <s_list>
            <div id="notifiHeadMenu">
              <ul>
                <li>
                  <div class="active">전체</div>
                </li>
                <li>
                  <div>공지사항</div>
                </li>
                <li>
                  <div>커리큘럼</div>
                </li>
                <li>
                  <div>이벤트</div>
                </li>
              </ul>
            </div>
          </s_list>
          <div id="notifiBodyList">
            <a class="notifi-item" href="./page.html">
              <b>
                제목입니다
                <span class="comment-cnt">1</span>
              </b>
              <p>
                Nulla volutpat finibus finibus. Vivamus interdum tellus non elit hendrerit, at vestibulum est porta. Nunc hendrerit maximus pellentesque. Nullam vel mi posuere, venenatis quam ac, eleifend mauris. Donec ac lacus ipsum. Nunc iaculis ac leo ut efficitur. Integer odio odio, laoreet ac hendrerit non, placerat vitae lacus. Sed lorem neque, sollicitudin non magna eu, interdum aliquam quam. Etiam dui felis, sodales a lacus ac, pellentesque mollis risus. Aliquam sed purus congue, dictum purus quis, bibendum tortor.
              </p>
              <span class="category">공지사항</span>
              <span class="date">2024. 2. 3.</span>
            </a>
            <a class="notifi-item" href="./page.html">
              <b>
                제목입니다
                <span class="comment-cnt">1</span>
              </b>
              <p>
                Nulla volutpat finibus finibus. Vivamus interdum tellus non elit hendrerit, at vestibulum est porta. Nunc hendrerit maximus pellentesque. Nullam vel mi posuere, venenatis quam ac, eleifend mauris. Donec ac lacus ipsum. Nunc iaculis ac leo ut efficitur. Integer odio odio, laoreet ac hendrerit non, placerat vitae lacus. Sed lorem neque, sollicitudin non magna eu, interdum aliquam quam. Etiam dui felis, sodales a lacus ac, pellentesque mollis risus. Aliquam sed purus congue, dictum purus quis, bibendum tortor.
              </p>
              <span class="category">공지사항</span>
              <span class="date">2024. 2. 3.</span>
            </a>
            <a class="notifi-item" href="./page.html">
              <b>
                제목입니다
                <span class="comment-cnt">1</span>
              </b>
              <p>
                Nulla volutpat finibus finibus. Vivamus interdum tellus non elit hendrerit, at vestibulum est porta. Nunc hendrerit maximus pellentesque. Nullam vel mi posuere, venenatis quam ac, eleifend mauris. Donec ac lacus ipsum. Nunc iaculis ac leo ut efficitur. Integer odio odio, laoreet ac hendrerit non, placerat vitae lacus. Sed lorem neque, sollicitudin non magna eu, interdum aliquam quam. Etiam dui felis, sodales a lacus ac, pellentesque mollis risus. Aliquam sed purus congue, dictum purus quis, bibendum tortor.
              </p>
              <span class="category">공지사항</span>
              <span class="date">2024. 2. 3.</span>
            </a>

            <div class="extra-list">
              <a class="extra-item" href="./page.html">
                <b>
                  제목입니다
                  <span class="comment-cnt">1</span>
                </b>
                <p>
                  Nulla volutpat finibus finibus. Vivamus interdum tellus non elit hendrerit, at vestibulum est porta. Nunc hendrerit maximus pellentesque. Nullam vel mi posuere, venenatis quam ac, eleifend mauris. Donec ac lacus ipsum. Nunc iaculis ac leo ut efficitur. Integer odio odio, laoreet ac hendrerit non, placerat vitae lacus. Sed lorem neque, sollicitudin non magna eu, interdum aliquam quam. Etiam dui felis, sodales a lacus ac, pellentesque mollis risus. Aliquam sed purus congue, dictum purus quis, bibendum tortor.
                </p>
                <span class="category">공지사항</span>
                <span class="date">2024. 2. 3.</span>
              </a>
              <a class="extra-item" href="./page.html">
                <b>
                  제목입니다
                  <span class="comment-cnt">1</span>
                </b>
                <p>
                  Nulla volutpat finibus finibus. Vivamus interdum tellus non elit hendrerit, at vestibulum est porta. Nunc hendrerit maximus pellentesque. Nullam vel mi posuere, venenatis quam ac, eleifend mauris. Donec ac lacus ipsum. Nunc iaculis ac leo ut efficitur. Integer odio odio, laoreet ac hendrerit non, placerat vitae lacus. Sed lorem neque, sollicitudin non magna eu, interdum aliquam quam. Etiam dui felis, sodales a lacus ac, pellentesque mollis risus. Aliquam sed purus congue, dictum purus quis, bibendum tortor.
                </p>
                <span class="category">공지사항</span>
                <span class="date">2024. 2. 3.</span>
              </a>
              <a class="extra-item" href="./page.html">
                <b>
                  제목입니다
                  <span class="comment-cnt">1</span>
                </b>
                <p>
                  Nulla volutpat finibus finibus. Vivamus interdum tellus non elit hendrerit, at vestibulum est porta. Nunc hendrerit maximus pellentesque. Nullam vel mi posuere, venenatis quam ac, eleifend mauris. Donec ac lacus ipsum. Nunc iaculis ac leo ut efficitur. Integer odio odio, laoreet ac hendrerit non, placerat vitae lacus. Sed lorem neque, sollicitudin non magna eu, interdum aliquam quam. Etiam dui felis, sodales a lacus ac, pellentesque mollis risus. Aliquam sed purus congue, dictum purus quis, bibendum tortor.
                </p>
                <span class="category">공지사항</span>
                <span class="date">2024. 2. 3.</span>
              </a>
              <a class="extra-item" href="./page.html">
                <b>
                  제목입니다
                  <span class="comment-cnt">1</span>
                </b>
                <p>
                  Nulla volutpat finibus finibus. Vivamus interdum tellus non elit hendrerit, at vestibulum est porta. Nunc hendrerit maximus pellentesque. Nullam vel mi posuere, venenatis quam ac, eleifend mauris. Donec ac lacus ipsum. Nunc iaculis ac leo ut efficitur. Integer odio odio, laoreet ac hendrerit non, placerat vitae lacus. Sed lorem neque, sollicitudin non magna eu, interdum aliquam quam. Etiam dui felis, sodales a lacus ac, pellentesque mollis risus. Aliquam sed purus congue, dictum purus quis, bibendum tortor.
                </p>
                <span class="category">공지사항</span>
                <span class="date">2024. 2. 3.</span>
              </a>
            </div>
            <div class="pagination">
              <a class="prev">이전</a>
              <a href="/?page=1">1</a>
              <a href="/?page=2">2</a>
              <a href="/?page=3">3</a>
              <a class="next">다음</a>
            </div>
          </div>
          <div id="notifiFooter">
            <img class="logo" src="./img/logo-black.png" alt="페트라수학" />
            <p>
              주소 영국 런던 W1U 6RP 베이커가 221번지 <br />
              Copyright 2024. 페트라수학. all rights reserved.
            </p>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
      // Wait for the DOM content to be fully loaded
      document.addEventListener("DOMContentLoaded", () => {
        // DOM elements
        const wrap = document.getElementById("wrap");
        const navItems = document.querySelectorAll("#navbar li");
        const navbarUl = document.querySelector("#navbar > ul");

        // Variables for tracking current and previous pages
        let currentpage = 0;
        let prevPage = 0;

        // Update the current page based on scroll position
        const updateCurrentPage = () => {
          currentpage = Math.floor(wrap.scrollTop / wrap.clientHeight);
          if (currentpage !== prevPage) {
            showCurrentPage(currentpage);
            showNotifiStatus();
            prevPage = currentpage;
          }
        };

        // Debounced function to show notification status
        const delayedShowNotifiStatus = _.debounce(() => {
          showNotifiStatus();
        }, 200);

        // Show the current page in the navigation
        const showCurrentPage = (now) => {
          navItems.forEach((item, index) => {
            manageNavItem(item, now === index + 1);
          });
        };

        // Show or hide notification status based on the current page
        const showNotifiStatus = () => {
          const isNavbarActive = navbarUl.classList.contains("active");

          if (currentpage === 4 && !isNavbarActive) {
            navbarUl.classList.add("active");
          } else if (currentpage !== 4 && isNavbarActive) {
            navbarUl.classList.remove("active");
          }
        };

        // Add or remove the active class for navigation items
        const manageNavItem = (item, isActive) => {
          isActive
            ? item.classList.add("activeNavItem")
            : item.classList.remove("activeNavItem");
        };

        // Scroll to a specific section with smooth behavior
        const scrollToSection = (sectionId) => {
          const section = document.getElementById(sectionId);
          if (section) {
            section.scrollIntoView({ behavior: "smooth" });
          }
        };

        // Event handler for navigation item clicks
        const handleNavItemClick = (sectionId) => {
          return () => {
            scrollToSection(sectionId);
          };
        };

        // Event listeners for navigation items
        const navItemIntro = document.getElementById("navItemIntro");
        const navItemEnrol = document.getElementById("navItemEnrol");
        const navItemLocat = document.getElementById("navItemLocat");
        const navItemNotif = document.getElementById("navItemNotif");

        navItemIntro.addEventListener("click", handleNavItemClick("intro"));
        navItemEnrol.addEventListener("click", handleNavItemClick("enroll"));
        navItemLocat.addEventListener("click", handleNavItemClick("location"));
        navItemNotif.addEventListener("click", handleNavItemClick("notify"));

        // Event listeners for scroll and wheel actions
        wrap.addEventListener("scroll", () => {
          requestAnimationFrame(updateCurrentPage);
          delayedShowNotifiStatus();
        });

        document.addEventListener("wheel", (e) => {
          let deltaY = e.deltaY;

          if (currentpage >= 4 && deltaY < 0) {
            return;
          } else {
            wrap.scrollBy({
              top: deltaY,
              behavior: "smooth",
            });
          }
        });

        // Get the current page number from the URL
        let currentNotifiPage = parseInt(
          new URLSearchParams(window.location.search).get("page")
        );
        let currentNotifiCategory = new URLSearchParams(
          window.location.search
        ).get("category");

        // Scroll to the notify section if the current page is specified in the URL
        const notifySection = document.getElementById("notify");

        if (currentNotifiCategory || currentNotifiPage) {
          notifySection.scrollIntoView({ behavior: "instant" });
        }

        if (!currentNotifiCategory) {
          currentNotifiCategory = "all";
        }

        if (!currentNotifiPage) {
          currentNotifiPage = 1;
        }

        // Remove the "selected" class from all pagination items
        const paginationItems = document.querySelectorAll(".pagination a");
        paginationItems.forEach((item) => {
          item.classList.remove("selected", "no-more-prev", "no-more-next");
        });

        // Add the "selected" class to the current page in pagination
        const currentNotifiPageItem = document.querySelector(
          `.pagination a[href="/?page=${currentNotifiPage}"]`
        );
        if (currentNotifiPageItem) {
          currentNotifiPageItem.classList.add("selected");
        }

        // Check if there are no more pages to move backward or forward
        const prevPageItem = document.querySelector(
          `.pagination a[href="/?page=${currentNotifiPage - 1}"]`
        );
        const nextPageItem = document.querySelector(
          `.pagination a[href="/?page=${currentNotifiPage + 1}"]`
        );

        // Update the pagination buttons based on the availability of prev and next pages
        const prevButton = document.querySelector(".pagination .prev");
        const nextButton = document.querySelector(".pagination .next");

        prevButton.classList.toggle("no-more-prev", !prevPageItem);
        nextButton.classList.toggle("no-more-next", !nextPageItem);

        prevButton.href = prevPageItem
          ? `/?page=${currentNotifiPage - 1}`
          : "#";
        nextButton.href = nextPageItem
          ? `/?page=${currentNotifiPage + 1}`
          : "#";
      });
    </script>
  </body>
</html>
